
Only leader parition provides r/w to the outside. Each partition maintains an ISRI(in sync replica)

offsets.retention.minutes

ExpirationTime = CommitTime + offsets.retention.minutes

Groups only works with subscription, not with assignment.

The offset commit are only used when you start a consumer or when performing rebalancing.

### Producer performance

Sometimes 99 percentile performance can not be tuned, although turning the average helps with the number

* batch.size
* linger.ms
* max.in.flight.requests.per.connection
* acks

kafka 0.9 performance improvement:
3 ms (99th percentile)
14 ms (99.9th percentile)

Since Kafka 0.10, Kafka messages contain a timestamp. This timestamp can be assigned by the producer, or is assigned by the broker if none is provided. By comparing timestamps in the output topic with timestamps in the input topic, we can measure processing latency.

How long will the producer wait before sending in order to allow more messages to get accumulated in the same batch. Normally the producer will not wait at all, and simply send all the messages that accumulated while the previous send was in progress

If sending is still slow and you are trying to understand what is going on, you will want to check if the send thread is fully utilized through jvisualsm (it is called kafka-producer-network-thread) or keep an eye on average batch size metric. If you find that you canâ€™t fill the buffer fast enough and the sender is idle, you can try adding application threads that share the same producer and increase throughput this way.
